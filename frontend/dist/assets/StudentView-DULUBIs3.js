import{d as z,a as T,y as B,z as R,q as o,f as k,h as v,w as l,g as n,i as f,j as p,m as c,u as H,r as V,e as X,o as F,B as M,n as S,p as y,T as K,C as P,t as w,F as U,v as Y,A as $,_ as j,b as q,E as J}from"./index-ByJc_l6L.js";import{p as A,_ as Q,a as L,f as N,T as Z,c as ee}from"./NoData.vue_vue_type_script_setup_true_lang-B10luDeo.js";const te={class:"nav-container-drawer"},se={class:"flex-all mt-15"},ae=z({__name:"StudentNavContainerMob",setup(C){const t=T(),s=_=>{t.activePage=_,localStorage.setItem("activePage",_)},g=()=>{const _=document.getElementById("LogoutOverlay");_&&(_.style.display="flex")};return(_,i)=>{const d=f("v-list-item"),D=f("v-btn"),b=f("v-list");return B((c(),k("div",te,[v(b,{class:"nav-list-container"},{default:l(()=>[v(d,{onClick:i[0]||(i[0]=O=>s("StudentWorkShops")),class:"nav-item nav-link","prepend-icon":"mdi-account-group"},{default:l(()=>i[2]||(i[2]=[p(" WORKSHOPS ")])),_:1}),n("div",se,[v(D,{onClick:i[1]||(i[1]=O=>g()),size:"small",color:"red",variant:"flat","prepend-icon":"mdi-logout"},{default:l(()=>i[3]||(i[3]=[p("LOGOUT")])),_:1})])]),_:1})],512)),[[R,o(t).navDrawer]])}}}),oe={class:"nav-container"},ne=z({__name:"StudentNavContainerDesk",setup(C){const t=T(),s=g=>{t.activePage=g,localStorage.setItem("activePage",g)};return(g,_)=>{const i=f("v-list-item"),d=f("v-list");return c(),k("div",oe,[v(d,{class:"nav-list-container"},{default:l(()=>[v(i,{onClick:_[0]||(_[0]=D=>s("StudentWorkShops")),class:"nav-item nav-link","prepend-icon":"mdi-account-group"},{default:l(()=>_[1]||(_[1]=[p(" WORKSHOPS ")])),_:1})]),_:1})])}}}),re={id:"StudentWorkShopPropertiesViewOverlay",class:"overlay"},le={class:"overlay-card"},ie={class:"overlay-card-content-container",style:{"margin-top":"3em"}},de={class:"table-data"},ce={class:"table-data"},ue={class:"table-data"},pe={class:"table-data"},ve={class:"table-data"},me={class:"table-data flex-all"},_e={class:"table-data"},ye={class:"table-data"},he={class:"table-data"},fe={class:"table-data"},Se=z({__name:"StudentWorkShops",setup(C){const t=H(),s=T(),g=V(""),_=new Date(t.currentDate),i=X(()=>t.StudentData.workshops);F(()=>{const h=A.subscribe("workshop_update_channel");A.subscribe("workshop_creation_channel").bind("new_workshop",a=>{t.StudentData.workshops.findIndex(m=>m.id===a.id)===-1&&t.StudentData.workshops.push({...a,registered:!1})}),h.bind("update",a=>{const e=t.StudentData.workshops.findIndex(m=>m.id===a.id);e!==-1&&a.update_type==="title"?t.StudentData.workshops[e].title=a.new_value:e!==-1&&a.update_type==="description"?t.StudentData.workshops[e].description=a.new_value:e!==-1&&a.update_type==="start_time"?t.StudentData.workshops[e].start_time=a.new_value:e!==-1&&a.update_type==="end_time"?t.StudentData.workshops[e].end_time=a.new_value:e!==-1&&a.update_type==="location"?t.StudentData.workshops[e].location=a.new_value:e!==-1&&a.update_type==="deadline"?t.StudentData.workshops[e].deadline=a.new_value:e!==-1&&a.update_type==="date"?t.StudentData.workshops[e].date=a.new_value:e!==-1&&a.update_type==="max_participants"?t.StudentData.workshops[e].max_participants=a.new_value:e!==-1&&a.update_type==="delete"&&t.StudentData.workshops.splice(e,1)})});const d=async()=>{try{const h=new FormData;h.append("type","fetchMissedWorkShopUpdates"),(await P.post("student/data",h)).data.forEach(e=>{const m=t.StudentData.workshops.findIndex(I=>I.id===e.id);m!==-1&&(t.StudentData.workshops[m]=e)})}catch{return Promise.reject()}};A.connection.bind("connected",()=>{t.StudentData.workshops.length>0&&d()});const D=async(h,r)=>{const a=new FormData;a.append("type","cancel"),a.append("workshopId",h.toString()),s.ShowLoadingOverlay();try{await P.post("student/data",a),t.StudentData.workshops[r].registered=!1,s.HideLoadingOverlay()}catch(e){s.HideLoadingOverlay(),e instanceof $&&(e.response?e.response.status===400&&e.response.data.message?s.ShowOverlay(e.response.data.message,"red"):s.ShowOverlay("Oops! something went wrong. Try again later","red"):!e.response&&(e.code==="ECONNABORTED"||!navigator.onLine)?s.ShowOverlay("A network error occurred! Please check you internet connection","red"):s.ShowOverlay("An unexpected error occurred!","red"))}},b=async(h,r)=>{const a=new FormData;a.append("type","register"),a.append("workshopId",h.toString()),s.ShowLoadingOverlay();try{await P.post("student/data",a),t.StudentData.workshops[r].registered=!0,s.HideLoadingOverlay()}catch(e){s.HideLoadingOverlay(),e instanceof $&&(e.response?e.response.status===400&&e.response.data.message?s.ShowOverlay(e.response.data.message,"red"):s.ShowOverlay("Oops! something went wrong. Try again later","red"):!e.response&&(e.code==="ECONNABORTED"||!navigator.onLine)?s.ShowOverlay("A network error occurred! Please check you internet connection","red"):s.ShowOverlay("An unexpected error occurred!","red"))}},O=(h,r="")=>{g.value=r;const a=document.getElementById(h);a&&(a.style.display="flex")},E=h=>{g.value="";const r=document.getElementById(h);r&&(r.style.display="none")};return(h,r)=>{const a=f("v-btn"),e=f("v-card-text"),m=f("v-chip"),I=f("v-icon"),G=f("v-table");return B((c(),k("div",{class:M(["content-wrapper",{"is-active-page":o(s).activePage==="StudentWorkShops"}])},[n("div",re,[n("div",le,[v(a,{onClick:r[0]||(r[0]=u=>E("StudentWorkShopPropertiesViewOverlay")),color:"red",size:"small",class:"close-btn",variant:"flat"},{default:l(()=>r[1]||(r[1]=[p(" X ")])),_:1}),n("div",ie,[v(e,null,{default:l(()=>[p(w(g.value),1)]),_:1})]),r[2]||(r[2]=n("div",{class:"overlay-card-action-btn-container"},null,-1))])]),o(t).fetchedDataLoaded&&i.value.length===0?(c(),S(Q,{key:0,message:"There are no workshops available"})):y("",!0),o(t).fetchedDataLoaded?y("",!0):(c(),S(K,{key:1,func:o(t).getStudentData},null,8,["func"])),o(t).fetchedDataLoaded&&i.value.length>0?(c(),S(G,{key:2,class:"table","fixed-header":""},{default:l(()=>[r[8]||(r[8]=n("thead",null,[n("tr",null,[n("th",{class:"table-head"},"TITLE"),n("th",{class:"table-head"},"DATE"),n("th",{class:"table-head"},"START TIME"),n("th",{class:"table-head"},"END TIME"),n("th",{class:"table-head"},"LOCATION"),n("th",{class:"table-head"},"STATUS"),n("th",{class:"table-head"},"ACTION"),n("th",{class:"table-head"},"DESCRIPTION"),n("th",{class:"table-head"},"MAX PARTICIPANTS"),n("th",{class:"table-head"},"DEADLINE")])],-1)),n("tbody",null,[(c(!0),k(U,null,Y(i.value.sort((u,x)=>x.id-u.id),(u,x)=>(c(),k("tr",{key:x},[n("td",de,w(u.title),1),n("td",ce,[v(m,{size:o(s).btnSize1},{default:l(()=>[p(w(o(L)(u.date,"long")),1)]),_:2},1032,["size"])]),n("td",ue,[v(m,{size:o(s).btnSize1},{default:l(()=>[p(w(o(N)(u.start_time)),1)]),_:2},1032,["size"])]),n("td",pe,[v(m,{size:o(s).btnSize1},{default:l(()=>[p(w(o(N)(u.end_time)),1)]),_:2},1032,["size"])]),n("td",ve,[v(m,{size:o(s).btnSize1},{default:l(()=>[p(w(u.location),1)]),_:2},1032,["size"])]),n("td",me,[u.registered?(c(),S(I,{key:0,size:"small",color:"green",icon:"mdi-circle"})):y("",!0),u.registered?y("",!0):(c(),S(I,{key:1,size:"small",color:"yellow",icon:"mdi-circle"})),u.registered?(c(),S(m,{key:2,class:"ml-2",size:"x-small"},{default:l(()=>r[3]||(r[3]=[p("registered")])),_:1})):y("",!0),u.registered?y("",!0):(c(),S(m,{key:3,class:"ml-2",size:"x-small"},{default:l(()=>r[4]||(r[4]=[p("not registered")])),_:1}))]),n("td",_e,[!u.registered&&o(_)<new Date(u.deadline)?(c(),S(m,{key:0,class:"chip-link mb-1",onClick:W=>o(s).ShowDeletionOverlay(()=>b(u.id,x),"Are you sure you want to register for this workshop?."),color:"green",size:"x-small"},{default:l(()=>r[5]||(r[5]=[p("REGISTER")])),_:2},1032,["onClick"])):y("",!0),u.registered&&o(_)<new Date(u.deadline)?(c(),S(m,{key:1,class:"chip-link mt-1",onClick:W=>o(s).ShowDeletionOverlay(()=>D(u.id,x),"Are you sure you want to cancel registration for this workshop?."),color:"red",size:"x-small"},{default:l(()=>r[6]||(r[6]=[p("CANCEL REGISTRATION")])),_:2},1032,["onClick"])):y("",!0)]),n("td",ye,[v(m,{class:"chip-link",onClick:W=>O("StudentWorkShopPropertiesViewOverlay",u.description),color:"blue",size:o(s).btnSize1},{default:l(()=>r[7]||(r[7]=[p("See Details")])),_:2},1032,["onClick","size"])]),n("td",he,[v(m,{size:o(s).btnSize1},{default:l(()=>[p(w(u.max_participants),1)]),_:2},1032,["size"])]),n("td",fe,[v(m,{size:o(s).btnSize1},{default:l(()=>[p(w(o(L)(u.deadline,"long")),1)]),_:2},1032,["size"])])]))),128))])]),_:1})):y("",!0)],2)),[[R,o(s).activePage==="StudentWorkShops"]])}}}),ge=j(Se,[["__scopeId","data-v-55a03b71"]]),we={key:0,id:"StudentWelcomeOverlay",class:"overlay"},ke={key:0,class:"overlay-card"},De={class:"overlay-card-content-container",style:{"margin-top":"3em"}},be={key:2,class:"main"},Oe={class:"pages-container"},xe=z({__name:"StudentView",setup(C){q({meta:[{name:"robots",content:"no-index"}]});const t=H(),s=T();F(()=>{t.userData.last_login||g("StudentWelcomeOverlay")}),J(()=>t.userData,()=>{const i=localStorage.getItem("activePage");if(i)s.activePage=i;else{const d=V("");d.value="StudentWorkShops",s.activePage=d.value,localStorage.setItem("activePage",d.value)}},{once:!0,immediate:!0});const g=i=>{const d=document.getElementById(i);d&&(d.style.display="flex")},_=i=>{const d=document.getElementById(i);d&&(d.style.display="none")};return(i,d)=>{const D=f("v-btn"),b=f("v-card-title"),O=f("v-card-text"),E=f("v-card");return c(),k(U,null,[o(t).userData?(c(),k("div",we,[o(t).userData.last_login?(c(),k("div",ke,[v(D,{onClick:d[0]||(d[0]=h=>_("StudentWelcomeOverlay")),color:"red",size:"small",class:"close-btn",variant:"flat"},{default:l(()=>d[1]||(d[1]=[p(" X ")])),_:1}),n("div",De,[v(E,{class:"welcome-card"},{default:l(()=>[v(b,{class:"text-h5 font-weight-bold"},{default:l(()=>d[2]||(d[2]=[p("Welcome!")])),_:1}),v(O,{class:"welcome-text"},{default:l(()=>[p(" Hello "+w(o(t).userData.first_name)+" "+w(o(t).userData.last_name)+", ðŸŽ‰ Thank you for registering for our workshop! We're thrilled to have you join us. Your account has been created, and you are now logged in. You can log in anytime to explore new workshops and register for more. Stay tuned for updatesâ€”we look forward to seeing you soon! ",1)]),_:1})]),_:1})])])):y("",!0)])):y("",!0),o(t).userData?(c(),S(Z,{key:1})):y("",!0),o(t).userData?(c(),k("main",be,[o(s).onDesk?y("",!0):(c(),S(ae,{key:0})),o(s).onDesk?(c(),S(ne,{key:1})):y("",!0),n("div",Oe,[n("div",{class:M(["component-wrapper",{"is-active-component":o(s).activePage==="StudentWorkShops"}])},[v(ge)],2)])])):y("",!0),o(t).userData?(c(),S(ee,{key:3})):y("",!0)],64)}}}),Te=j(xe,[["__scopeId","data-v-0dc1538b"]]);export{Te as default};
