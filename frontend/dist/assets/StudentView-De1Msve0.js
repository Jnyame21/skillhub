import{d as z,a as I,y as B,z as R,q as o,f as k,h as v,w as l,g as n,i as f,j as p,m as c,u as H,r as V,e as X,o as F,B as M,n as S,p as _,T as K,C as P,t as w,F as U,v as Y,A as W,_ as j,b as q,E as J}from"./index-CSJ0c9ox.js";import{p as A,_ as Q,a as $,f as N,T as Z,c as ee}from"./NoData.vue_vue_type_script_setup_true_lang-C8Ho1jek.js";const te={class:"nav-container-drawer"},se={class:"flex-all mt-15"},ae=z({__name:"StudentNavContainerMob",setup(T){const e=I(),a=m=>{e.activePage=m,localStorage.setItem("activePage",m)},g=()=>{const m=document.getElementById("LogoutOverlay");m&&(m.style.display="flex")};return(m,i)=>{const d=f("v-list-item"),D=f("v-btn"),b=f("v-list");return B((c(),k("div",te,[v(b,{class:"nav-list-container"},{default:l(()=>[v(d,{onClick:i[0]||(i[0]=O=>a("StudentWorkShops")),class:"nav-item nav-link","prepend-icon":"mdi-account-group"},{default:l(()=>i[2]||(i[2]=[p(" WORKSHOPS ")])),_:1}),n("div",se,[v(D,{onClick:i[1]||(i[1]=O=>g()),size:"small",color:"red",variant:"flat","prepend-icon":"mdi-logout"},{default:l(()=>i[3]||(i[3]=[p("LOGOUT")])),_:1})])]),_:1})],512)),[[R,o(e).navDrawer]])}}}),oe={class:"nav-container"},ne=z({__name:"StudentNavContainerDesk",setup(T){const e=I(),a=g=>{e.activePage=g,localStorage.setItem("activePage",g)};return(g,m)=>{const i=f("v-list-item"),d=f("v-list");return c(),k("div",oe,[v(d,{class:"nav-list-container"},{default:l(()=>[v(i,{onClick:m[0]||(m[0]=D=>a("StudentWorkShops")),class:"nav-item nav-link","prepend-icon":"mdi-account-group"},{default:l(()=>m[1]||(m[1]=[p(" WORKSHOPS ")])),_:1})]),_:1})])}}}),re={id:"StudentWorkShopPropertiesViewOverlay",class:"overlay"},le={class:"overlay-card"},ie={class:"overlay-card-content-container",style:{"margin-top":"3em"}},de={class:"table-data"},ce={class:"table-data"},ue={class:"table-data"},pe={class:"table-data"},ve={class:"table-data"},me={class:"table-data flex-all"},_e={class:"table-data"},ye={class:"table-data"},he={class:"table-data"},fe={class:"table-data"},Se=z({__name:"StudentWorkShops",setup(T){const e=H(),a=I(),g=V(""),m=new Date(e.currentDate),i=X(()=>e.StudentData.workshops);F(()=>{const h=A.subscribe("workshop_update_channel");A.subscribe("workshop_creation_channel").bind("new_workshop",s=>{e.StudentData.workshops.findIndex(y=>y.id===s.id)===-1&&e.StudentData.workshops.push({...s,registered:!1})}),h.bind("update",s=>{const t=e.StudentData.workshops.findIndex(y=>y.id===s.id);t!==-1&&s.update_type==="title"?e.StudentData.workshops[t].title=s.new_value:t!==-1&&s.update_type==="description"?e.StudentData.workshops[t].description=s.new_value:t!==-1&&s.update_type==="start_time"?e.StudentData.workshops[t].start_time=s.new_value:t!==-1&&s.update_type==="end_time"?e.StudentData.workshops[t].end_time=s.new_value:t!==-1&&s.update_type==="location"?e.StudentData.workshops[t].location=s.new_value:t!==-1&&s.update_type==="deadline"?e.StudentData.workshops[t].deadline=s.new_value:t!==-1&&s.update_type==="date"?e.StudentData.workshops[t].date=s.new_value:t!==-1&&s.update_type==="max_participants"?e.StudentData.workshops[t].max_participants=s.new_value:t!==-1&&s.update_type==="delete"&&e.StudentData.workshops.splice(t,1)})});const d=async()=>{try{const h=new FormData;h.append("type","fetchMissedWorkShopUpdates");const s=(await P.post("student/data",h)).data;e.StudentData.workshops=s}catch{return Promise.reject()}};A.connection.bind("connected",()=>{e.fetchedDataLoaded&&d()});const D=async(h,r)=>{const s=new FormData;s.append("type","cancel"),s.append("workshopId",h.toString()),a.ShowLoadingOverlay();try{await P.post("student/data",s),e.StudentData.workshops[r].registered=!1,a.HideLoadingOverlay()}catch(t){a.HideLoadingOverlay(),t instanceof W&&(t.response?t.response.status===400&&t.response.data.message?a.ShowOverlay(t.response.data.message,"red"):a.ShowOverlay("Oops! something went wrong. Try again later","red"):!t.response&&(t.code==="ECONNABORTED"||!navigator.onLine)?a.ShowOverlay("A network error occurred! Please check you internet connection","red"):a.ShowOverlay("An unexpected error occurred!","red"))}},b=async(h,r)=>{const s=new FormData;s.append("type","register"),s.append("workshopId",h.toString()),a.ShowLoadingOverlay();try{await P.post("student/data",s),e.StudentData.workshops[r].registered=!0,a.HideLoadingOverlay()}catch(t){a.HideLoadingOverlay(),t instanceof W&&(t.response?t.response.status===400&&t.response.data.message?a.ShowOverlay(t.response.data.message,"red"):a.ShowOverlay("Oops! something went wrong. Try again later","red"):!t.response&&(t.code==="ECONNABORTED"||!navigator.onLine)?a.ShowOverlay("A network error occurred! Please check you internet connection","red"):a.ShowOverlay("An unexpected error occurred!","red"))}},O=(h,r="")=>{g.value=r;const s=document.getElementById(h);s&&(s.style.display="flex")},C=h=>{g.value="";const r=document.getElementById(h);r&&(r.style.display="none")};return(h,r)=>{const s=f("v-btn"),t=f("v-card-text"),y=f("v-chip"),E=f("v-icon"),G=f("v-table");return B((c(),k("div",{class:M(["content-wrapper",{"is-active-page":o(a).activePage==="StudentWorkShops"}])},[n("div",re,[n("div",le,[v(s,{onClick:r[0]||(r[0]=u=>C("StudentWorkShopPropertiesViewOverlay")),color:"red",size:"small",class:"close-btn",variant:"flat"},{default:l(()=>r[1]||(r[1]=[p(" X ")])),_:1}),n("div",ie,[v(t,null,{default:l(()=>[p(w(g.value),1)]),_:1})]),r[2]||(r[2]=n("div",{class:"overlay-card-action-btn-container"},null,-1))])]),o(e).fetchedDataLoaded&&i.value.length===0?(c(),S(Q,{key:0,message:"There are no workshops available"})):_("",!0),o(e).fetchedDataLoaded?_("",!0):(c(),S(K,{key:1,func:o(e).getStudentData},null,8,["func"])),o(e).fetchedDataLoaded&&i.value.length>0?(c(),S(G,{key:2,class:"table","fixed-header":""},{default:l(()=>[r[8]||(r[8]=n("thead",null,[n("tr",null,[n("th",{class:"table-head"},"TITLE"),n("th",{class:"table-head"},"DATE"),n("th",{class:"table-head"},"START TIME"),n("th",{class:"table-head"},"END TIME"),n("th",{class:"table-head"},"LOCATION"),n("th",{class:"table-head"},"STATUS"),n("th",{class:"table-head"},"ACTION"),n("th",{class:"table-head"},"DESCRIPTION"),n("th",{class:"table-head"},"MAX PARTICIPANTS"),n("th",{class:"table-head"},"DEADLINE")])],-1)),n("tbody",null,[(c(!0),k(U,null,Y(i.value.sort((u,x)=>x.id-u.id),(u,x)=>(c(),k("tr",{key:x},[n("td",de,w(u.title),1),n("td",ce,[v(y,{size:o(a).btnSize1},{default:l(()=>[p(w(o($)(u.date,"long")),1)]),_:2},1032,["size"])]),n("td",ue,[v(y,{size:o(a).btnSize1},{default:l(()=>[p(w(o(N)(u.start_time)),1)]),_:2},1032,["size"])]),n("td",pe,[v(y,{size:o(a).btnSize1},{default:l(()=>[p(w(o(N)(u.end_time)),1)]),_:2},1032,["size"])]),n("td",ve,[v(y,{size:o(a).btnSize1},{default:l(()=>[p(w(u.location),1)]),_:2},1032,["size"])]),n("td",me,[u.registered?(c(),S(E,{key:0,size:"small",color:"green",icon:"mdi-circle"})):_("",!0),u.registered?_("",!0):(c(),S(E,{key:1,size:"small",color:"yellow",icon:"mdi-circle"})),u.registered?(c(),S(y,{key:2,class:"ml-2",size:"x-small"},{default:l(()=>r[3]||(r[3]=[p("registered")])),_:1})):_("",!0),u.registered?_("",!0):(c(),S(y,{key:3,class:"ml-2",size:"x-small"},{default:l(()=>r[4]||(r[4]=[p("not registered")])),_:1}))]),n("td",_e,[!u.registered&&o(m)<new Date(u.deadline)?(c(),S(y,{key:0,class:"chip-link mb-1",onClick:L=>o(a).ShowDeletionOverlay(()=>b(u.id,x),"Are you sure you want to register for this workshop?."),color:"green",size:"x-small"},{default:l(()=>r[5]||(r[5]=[p("REGISTER")])),_:2},1032,["onClick"])):_("",!0),u.registered&&o(m)<new Date(u.deadline)?(c(),S(y,{key:1,class:"chip-link mt-1",onClick:L=>o(a).ShowDeletionOverlay(()=>D(u.id,x),"Are you sure you want to cancel registration for this workshop?."),color:"red",size:"x-small"},{default:l(()=>r[6]||(r[6]=[p("CANCEL REGISTRATION")])),_:2},1032,["onClick"])):_("",!0)]),n("td",ye,[v(y,{class:"chip-link",onClick:L=>O("StudentWorkShopPropertiesViewOverlay",u.description),color:"blue",size:o(a).btnSize1},{default:l(()=>r[7]||(r[7]=[p("See Details")])),_:2},1032,["onClick","size"])]),n("td",he,[v(y,{size:o(a).btnSize1},{default:l(()=>[p(w(u.max_participants),1)]),_:2},1032,["size"])]),n("td",fe,[v(y,{size:o(a).btnSize1},{default:l(()=>[p(w(o($)(u.deadline,"long")),1)]),_:2},1032,["size"])])]))),128))])]),_:1})):_("",!0)],2)),[[R,o(a).activePage==="StudentWorkShops"]])}}}),ge=j(Se,[["__scopeId","data-v-b03e271f"]]),we={key:0,id:"StudentWelcomeOverlay",class:"overlay"},ke={key:0,class:"overlay-card"},De={class:"overlay-card-content-container",style:{"margin-top":"3em"}},be={key:2,class:"main"},Oe={class:"pages-container"},xe=z({__name:"StudentView",setup(T){q({meta:[{name:"robots",content:"no-index"}]});const e=H(),a=I();F(()=>{e.userData.last_login||g("StudentWelcomeOverlay")}),J(()=>e.userData,()=>{const i=localStorage.getItem("activePage");if(i)a.activePage=i;else{const d=V("");d.value="StudentWorkShops",a.activePage=d.value,localStorage.setItem("activePage",d.value)}},{once:!0,immediate:!0});const g=i=>{const d=document.getElementById(i);d&&(d.style.display="flex")},m=i=>{const d=document.getElementById(i);d&&(d.style.display="none")};return(i,d)=>{const D=f("v-btn"),b=f("v-card-title"),O=f("v-card-text"),C=f("v-card");return c(),k(U,null,[o(e).userData?(c(),k("div",we,[o(e).userData.last_login?(c(),k("div",ke,[v(D,{onClick:d[0]||(d[0]=h=>m("StudentWelcomeOverlay")),color:"red",size:"small",class:"close-btn",variant:"flat"},{default:l(()=>d[1]||(d[1]=[p(" X ")])),_:1}),n("div",De,[v(C,{class:"welcome-card"},{default:l(()=>[v(b,{class:"text-h5 font-weight-bold"},{default:l(()=>d[2]||(d[2]=[p("Welcome!")])),_:1}),v(O,{class:"welcome-text"},{default:l(()=>[p(" Hello "+w(o(e).userData.first_name)+" "+w(o(e).userData.last_name)+", ðŸŽ‰ Thank you for registering for our workshop! We're thrilled to have you join us. Your account has been created, and you are now logged in. You can log in anytime to explore new workshops and register for more. Stay tuned for updatesâ€”we look forward to seeing you soon! ",1)]),_:1})]),_:1})])])):_("",!0)])):_("",!0),o(e).userData?(c(),S(Z,{key:1})):_("",!0),o(e).userData?(c(),k("main",be,[o(a).onDesk?_("",!0):(c(),S(ae,{key:0})),o(a).onDesk?(c(),S(ne,{key:1})):_("",!0),n("div",Oe,[n("div",{class:M(["component-wrapper",{"is-active-component":o(a).activePage==="StudentWorkShops"}])},[v(ge)],2)])])):_("",!0),o(e).userData?(c(),S(ee,{key:3})):_("",!0)],64)}}}),Te=j(xe,[["__scopeId","data-v-0dc1538b"]]);export{Te as default};
