import{d as A,u as O,a as F,b as L,r as C,c as I,e as P,o as R,f,g as t,h as i,w as b,i as v,j as c,k as T,l as M,m as d,n as p,p as r,q as y,t as V,s as D,A as Y,_ as B}from"./index-7fJesO-r.js";const H="/app_logo.png",$={class:"container flex-c flex-column"},G={id:"SignUpOverlay",class:"overlay"},W={class:"overlay-card"},j={class:"overlay-card-content-container",style:{"margin-top":"3em"}},_={class:"mb-5",style:{color:"black"}},q={class:"overlay-btn-action-container"},z={class:"img-container flex-c align-center justify-center"},K={class:"flex-all-c form-container"},X={class:"flex-c align-center w-100",style:{"background-color":"transparent"}},J={class:"form-error-message-container"},Q={key:0,class:"form-error-message login-success-message"},Z={key:1,class:"login-form-error-message",style:{color:"red"}},ee={key:6,class:"signup-text"},le=A({__name:"LoginView",setup(ne){const o=O(),m=F();L({meta:[{name:"description",content:"SkillHub - A seamless platform for students to explore, register, and participate in skill-training workshops. Learn, grow, and enhance your skills today!"},{name:"robots",content:"index, follow"}]});const w=M(),u=C(!1),e=I({form:!1,username:"",password:"",loading:!1,visible:!1,lockField:!1,firstName:"",lastName:"",email:"",signupPassword:"",school:"",program:"",currentYear:"",phoneNumber:"",gender:""}),N=P(()=>!(e.username&&e.password));R(()=>{localStorage.removeItem("activePage")});const S=async()=>{e.loading=!0,e.lockField=!0;try{await o.userLogin(e.username,e.password),o.isAuthenticated&&o.userData.role.toLowerCase()==="student"?(e.password="",e.loading=!1,setTimeout(()=>{w.push("/student")},2e3)):o.isAuthenticated&&o.userData.role.toLowerCase()==="superuser"?(e.password="",e.loading=!1,setTimeout(()=>{w.push("/admin")},2e3)):(o.message="Ooop! Something went wrong. Contact your IT administrator",e.loading=!1,e.lockField=!1,setTimeout(()=>{o.message=""},1e4))}catch{e.loading=!1,e.lockField=!1,setTimeout(()=>{o.message=""},1e4)}},x=async()=>{const a=new FormData;a.append("type","signup"),a.append("firstName",e.firstName),a.append("lastName",e.lastName),a.append("gender",e.gender),a.append("school",e.school),a.append("program",e.program),a.append("currentYear",e.currentYear),a.append("phoneNumber",e.phoneNumber),a.append("email",e.email),a.append("password",e.signupPassword),m.ShowLoadingOverlay();try{await D.post("student/signup",a),e.password="",e.gender="",e.currentYear="",e.firstName="",e.lastName="",e.email="",e.school="",e.program="",e.phoneNumber="",e.signupPassword="",k("SignUpOverlay"),m.HideLoadingOverlay(),m.ShowOverlay("Your student account has been created successfully. Your username has been sent to your email. Please log in with it.","green")}catch(l){m.HideLoadingOverlay(),l instanceof Y&&(l.response?l.response.status===400&&l.response.data.message?m.ShowOverlay(l.response.data.message,"red"):m.ShowOverlay("Oops! something went wrong. Try again later","red"):!l.response&&(l.code==="ECONNABORTED"||!navigator.onLine)?m.ShowOverlay("A network error occurred! Please check you internet connection","red"):m.ShowOverlay("An unexpected error occurred!","red"))}},E=a=>{const l=document.getElementById(a);l&&(l.style.display="flex")},k=a=>{const l=document.getElementById(a);l&&(l.style.display="none")};return(a,l)=>{const g=v("v-btn"),s=v("v-text-field"),U=v("v-select"),h=v("v-form");return d(),f("div",$,[t("div",G,[t("div",W,[i(g,{onClick:l[0]||(l[0]=n=>k("SignUpOverlay")),color:"red",size:"small",class:"close-btn",variant:"flat"},{default:b(()=>l[21]||(l[21]=[c(" X ")])),_:1}),t("div",j,[i(s,{class:"input-field",disabled:e.lockField,modelValue:e.firstName,"onUpdate:modelValue":l[1]||(l[1]=n=>e.firstName=n),label:"FIRST NAME",hint:"Enter your first name",density:"compact",type:"text",clearable:"","prepend-inner-icon":"mdi-account-outline"},null,8,["disabled","modelValue"]),i(s,{class:"input-field",disabled:e.lockField,modelValue:e.lastName,"onUpdate:modelValue":l[2]||(l[2]=n=>e.lastName=n),label:"LAST NAME",hint:"Enter your last name (middle name + surname)",density:"compact",type:"text",clearable:"","prepend-inner-icon":"mdi-account-outline"},null,8,["disabled","modelValue"]),i(U,{class:"select",items:["Male","Female","Other"],label:"GENDER",modelValue:e.gender,"onUpdate:modelValue":l[3]||(l[3]=n=>e.gender=n),variant:"solo-filled",density:"comfortable",clearable:"","persistent-hint":"",hint:"Select your gender","prepend-inner-icon":"mdi-gender-transgender"},null,8,["modelValue"]),i(s,{class:"input-field",disabled:e.lockField,modelValue:e.email,"onUpdate:modelValue":l[4]||(l[4]=n=>e.email=n),label:"EMAIL",hint:"Enter your email",density:"compact",type:"email",clearable:"","prepend-inner-icon":"mdi-email"},null,8,["disabled","modelValue"]),i(s,{class:"input-field",disabled:e.lockField,modelValue:e.school,"onUpdate:modelValue":l[5]||(l[5]=n=>e.school=n),label:"SCHOOL",hint:"Enter the name of your school",density:"compact",clearable:"","prepend-inner-icon":"mdi-school"},null,8,["disabled","modelValue"]),i(s,{class:"input-field",disabled:e.lockField,modelValue:e.program,"onUpdate:modelValue":l[6]||(l[6]=n=>e.program=n),label:"PROGRAM",hint:"Enter your program of study",density:"compact",clearable:"","prepend-inner-icon":"mdi-book-open"},null,8,["disabled","modelValue"]),i(s,{class:"input-field",disabled:e.lockField,modelValue:e.currentYear,"onUpdate:modelValue":l[7]||(l[7]=n=>e.currentYear=n),label:"CURRENT YEAR",hint:"Which year are you currently in?",type:"number",density:"compact",clearable:"","prepend-inner-icon":"mdi-timeline-clock"},null,8,["disabled","modelValue"]),i(s,{class:"input-field",disabled:e.lockField,modelValue:e.phoneNumber,"onUpdate:modelValue":l[8]||(l[8]=n=>e.phoneNumber=n),placeholder:"Eg. +233596021383",label:"PHONE NUMBER",hint:"Enter your mobile number",density:"compact",type:"text",clearable:"","prepend-inner-icon":"mdi-phone"},null,8,["disabled","modelValue"]),i(s,{class:"input-field password","append-inner-icon":e.visible?"mdi-eye-off-outline":"mdi-eye-outline","onClick:appendInner":l[9]||(l[9]=n=>e.visible=!e.visible),disabled:e.lockField,type:e.visible?"text":"password",clearable:"",density:"compact",hint:"Set a password",modelValue:e.signupPassword,"onUpdate:modelValue":l[10]||(l[10]=n=>e.signupPassword=n),label:"PASSWORD","prepend-inner-icon":"mdi-lock-outline"},null,8,["append-inner-icon","disabled","type","modelValue"]),t("p",_,[l[22]||(l[22]=c("Already have a student account? ")),t("a",{onClick:l[11]||(l[11]=n=>k("SignUpOverlay")),class:"signup-link"},"Sign in")])]),t("div",q,[i(g,{onClick:x,class:"mb-3",type:"submit","prepend-icon":"mdi-lock-open-outline",loading:e.loading,color:"black",disabled:!(e.firstName&&e.lastName&&e.gender&&e.school&&e.program&&e.currentYear&&e.phoneNumber&&e.email&&e.signupPassword)},{default:b(()=>l[23]||(l[23]=[c("SIGN UP ")])),_:1},8,["loading","disabled"])])])]),t("div",z,[t("section",K,[l[27]||(l[27]=t("h1",{class:"portal-name"},"SKILLHUB",-1)),l[28]||(l[28]=t("img",{class:"logo",src:H,alt:"app logo"},null,-1)),t("div",X,[i(h,{class:"login-form-input-container",onSubmit:T(S,["prevent"])},{default:b(()=>[t("div",J,[y(o).message&&y(o).isAuthenticated?(d(),f("h6",Q,V(y(o).message),1)):r("",!0),y(o).message&&!y(o).isAuthenticated?(d(),f("h6",Z,V(y(o).message),1)):r("",!0)]),u.value?r("",!0):(d(),p(s,{key:0,disabled:e.lockField,class:"form-text-field username",modelValue:e.username,"onUpdate:modelValue":l[12]||(l[12]=n=>e.username=n),label:"USERNAME",hint:"Enter your username",density:"compact",type:"text",clearable:"","prepend-inner-icon":"mdi-account-outline"},null,8,["disabled","modelValue"])),u.value?r("",!0):(d(),p(s,{key:1,"append-inner-icon":e.visible?"mdi-eye-off-outline":"mdi-eye-outline","onClick:appendInner":l[13]||(l[13]=n=>e.visible=!e.visible),disabled:e.lockField,type:e.visible?"text":"password",clearable:"",density:"compact",class:"form-text-field password",hint:"Enter your password",modelValue:e.password,"onUpdate:modelValue":l[14]||(l[14]=n=>e.password=n),label:"PASSWORD","prepend-inner-icon":"mdi-lock-outline"},null,8,["append-inner-icon","disabled","type","modelValue"])),u.value?(d(),p(s,{key:2,disabled:e.lockField,class:"form-text-field username",modelValue:e.firstName,"onUpdate:modelValue":l[15]||(l[15]=n=>e.firstName=n),label:"FIRST NAME",hint:"Enter your first name",density:"compact",type:"text",clearable:"","prepend-inner-icon":"mdi-account-outline"},null,8,["disabled","modelValue"])):r("",!0),u.value?(d(),p(s,{key:3,disabled:e.lockField,class:"form-text-field username",modelValue:e.lastName,"onUpdate:modelValue":l[16]||(l[16]=n=>e.lastName=n),label:"LAST NAME",hint:"Enter your last name (middle name + surname)",density:"compact",type:"text",clearable:"","prepend-inner-icon":"mdi-account-outline"},null,8,["disabled","modelValue"])):r("",!0),u.value?(d(),p(s,{key:4,disabled:e.lockField,class:"form-text-field username",modelValue:e.email,"onUpdate:modelValue":l[17]||(l[17]=n=>e.email=n),label:"EMAIL",hint:"Enter your email",density:"compact",type:"email",clearable:"","prepend-inner-icon":"mdi-account-outline"},null,8,["disabled","modelValue"])):r("",!0),u.value?(d(),p(s,{key:5,"append-inner-icon":e.visible?"mdi-eye-off-outline":"mdi-eye-outline","onClick:appendInner":l[18]||(l[18]=n=>e.visible=!e.visible),disabled:e.lockField,type:e.visible?"text":"password",clearable:"",density:"compact",class:"form-text-field password",hint:"Set a password",modelValue:e.password,"onUpdate:modelValue":l[19]||(l[19]=n=>e.password=n),label:"PASSWORD","prepend-inner-icon":"mdi-lock-outline"},null,8,["append-inner-icon","disabled","type","modelValue"])):r("",!0),u.value?r("",!0):(d(),f("p",ee,[l[24]||(l[24]=c("Don't have a student account yet? ")),t("a",{onClick:l[20]||(l[20]=n=>E("SignUpOverlay")),class:"signup-link"},"Sign up")])),u.value?r("",!0):(d(),p(g,{key:7,class:"submit-btn",type:"submit","prepend-icon":"mdi-lock-open-outline",loading:e.loading,disabled:N.value},{default:b(()=>l[25]||(l[25]=[c("LOGIN ")])),_:1},8,["loading","disabled"])),u.value?(d(),p(g,{key:8,class:"submit-btn",type:"submit","prepend-icon":"mdi-lock-open-outline",loading:e.loading,disabled:!(e.firstName&&e.lastName&&e.email&&e.password)},{default:b(()=>l[26]||(l[26]=[c("SIGN UP ")])),_:1},8,["loading","disabled"])):r("",!0)]),_:1})])])])])}}}),oe=B(le,[["__scopeId","data-v-ba7feea7"]]);export{oe as default};
