import{d as z,a as T,y as R,z as B,q as n,f as w,h as v,w as i,g as o,i as h,j as p,m as d,u as H,r as V,e as G,o as X,B as F,n as f,p as _,T as K,C as P,t as g,F as M,v as Y,A as $,_ as U,b as q,E as J}from"./index-BKKPOV3S.js";import{p as A,_ as Q,a as L,f as N,T as Z,c as ee}from"./NoData.vue_vue_type_script_setup_true_lang-L_ACAmSr.js";const te={class:"nav-container-drawer"},se={class:"flex-all mt-15"},ae=z({__name:"StudentNavContainerMob",setup(C){const t=T(),s=u=>{t.activePage=u,localStorage.setItem("activePage",u)},S=()=>{const u=document.getElementById("LogoutOverlay");u&&(u.style.display="flex")};return(u,l)=>{const k=h("v-list-item"),D=h("v-btn"),b=h("v-list");return R((d(),w("div",te,[v(b,{class:"nav-list-container"},{default:i(()=>[v(k,{onClick:l[0]||(l[0]=O=>s("StudentWorkShops")),class:"nav-item nav-link","prepend-icon":"mdi-account-group"},{default:i(()=>l[2]||(l[2]=[p(" WORKSHOPS ")])),_:1}),o("div",se,[v(D,{onClick:l[1]||(l[1]=O=>S()),size:"small",color:"red",variant:"flat","prepend-icon":"mdi-logout"},{default:i(()=>l[3]||(l[3]=[p("LOGOUT")])),_:1})])]),_:1})],512)),[[B,n(t).navDrawer]])}}}),oe={class:"nav-container"},ne=z({__name:"StudentNavContainerDesk",setup(C){const t=T(),s=S=>{t.activePage=S,localStorage.setItem("activePage",S)};return(S,u)=>{const l=h("v-list-item"),k=h("v-list");return d(),w("div",oe,[v(k,{class:"nav-list-container"},{default:i(()=>[v(l,{onClick:u[0]||(u[0]=D=>s("StudentWorkShops")),class:"nav-item nav-link","prepend-icon":"mdi-account-group"},{default:i(()=>u[1]||(u[1]=[p(" WORKSHOPS ")])),_:1})]),_:1})])}}}),re={id:"StudentWorkShopPropertiesViewOverlay",class:"overlay"},le={class:"overlay-card"},ie={class:"overlay-card-content-container"},de={class:"table-data"},ce={class:"table-data"},ue={class:"table-data"},pe={class:"table-data"},ve={class:"table-data"},me={class:"table-data flex-all"},_e={class:"table-data"},he={class:"table-data"},ye={class:"table-data"},fe={class:"table-data"},Se=z({__name:"StudentWorkShops",setup(C){const t=H(),s=T(),S=V(""),u=new Date(t.currentDate),l=G(()=>t.StudentData.workshops);X(()=>{const y=A.subscribe("workshop_update_channel");A.subscribe("workshop_creation_channel").bind("new_workshop",a=>{t.StudentData.workshops.findIndex(m=>m.id===a.id)===-1&&t.StudentData.workshops.push({...a,registered:!1})}),y.bind("update",a=>{const e=t.StudentData.workshops.findIndex(m=>m.id===a.id);e!==-1&&a.update_type==="title"?t.StudentData.workshops[e].title=a.new_value:e!==-1&&a.update_type==="description"?t.StudentData.workshops[e].description=a.new_value:e!==-1&&a.update_type==="start_time"?t.StudentData.workshops[e].start_time=a.new_value:e!==-1&&a.update_type==="end_time"?t.StudentData.workshops[e].end_time=a.new_value:e!==-1&&a.update_type==="location"?t.StudentData.workshops[e].location=a.new_value:e!==-1&&a.update_type==="deadline"?t.StudentData.workshops[e].deadline=a.new_value:e!==-1&&a.update_type==="date"?t.StudentData.workshops[e].date=a.new_value:e!==-1&&a.update_type==="max_participants"?t.StudentData.workshops[e].max_participants=a.new_value:e!==-1&&a.update_type==="delete"&&t.StudentData.workshops.splice(e,1)})});const k=async()=>{try{const y=new FormData;y.append("type","fetchMissedWorkShopUpdates"),(await P.post("student/data",y)).data.forEach(e=>{const m=t.StudentData.workshops.findIndex(I=>I.id===e.id);m!==-1&&(t.StudentData.workshops[m]=e)})}catch{return Promise.reject()}};A.connection.bind("connected",()=>{t.StudentData.workshops.length>0&&k()});const D=async(y,r)=>{const a=new FormData;a.append("type","cancel"),a.append("workshopId",y.toString()),s.ShowLoadingOverlay();try{await P.post("student/data",a),t.StudentData.workshops[r].registered=!1,s.HideLoadingOverlay()}catch(e){s.HideLoadingOverlay(),e instanceof $&&(e.response?e.response.status===400&&e.response.data.message?s.ShowOverlay(e.response.data.message,"red"):s.ShowOverlay("Oops! something went wrong. Try again later","red"):!e.response&&(e.code==="ECONNABORTED"||!navigator.onLine)?s.ShowOverlay("A network error occurred! Please check you internet connection","red"):s.ShowOverlay("An unexpected error occurred!","red"))}},b=async(y,r)=>{const a=new FormData;a.append("type","register"),a.append("workshopId",y.toString()),s.ShowLoadingOverlay();try{await P.post("student/data",a),t.StudentData.workshops[r].registered=!0,s.HideLoadingOverlay()}catch(e){s.HideLoadingOverlay(),e instanceof $&&(e.response?e.response.status===400&&e.response.data.message?s.ShowOverlay(e.response.data.message,"red"):s.ShowOverlay("Oops! something went wrong. Try again later","red"):!e.response&&(e.code==="ECONNABORTED"||!navigator.onLine)?s.ShowOverlay("A network error occurred! Please check you internet connection","red"):s.ShowOverlay("An unexpected error occurred!","red"))}},O=(y,r="")=>{S.value=r;const a=document.getElementById(y);a&&(a.style.display="flex")},E=y=>{S.value="";const r=document.getElementById(y);r&&(r.style.display="none")};return(y,r)=>{const a=h("v-btn"),e=h("v-card-text"),m=h("v-chip"),I=h("v-icon"),j=h("v-table");return R((d(),w("div",{class:F(["content-wrapper",{"is-active-page":n(s).activePage==="StudentWorkShops"}])},[o("div",re,[o("div",le,[v(a,{onClick:r[0]||(r[0]=c=>E("StudentWorkShopPropertiesViewOverlay")),color:"red",size:"small",class:"close-btn",variant:"flat"},{default:i(()=>r[1]||(r[1]=[p(" X ")])),_:1}),r[2]||(r[2]=o("div",{class:"overlay-card-info-container"},null,-1)),o("div",ie,[v(e,null,{default:i(()=>[p(g(S.value),1)]),_:1})]),r[3]||(r[3]=o("div",{class:"overlay-card-action-btn-container"},null,-1))])]),n(t).fetchedDataLoaded&&l.value.length===0?(d(),f(Q,{key:0,message:"There are no workshops available"})):_("",!0),n(t).fetchedDataLoaded?_("",!0):(d(),f(K,{key:1,func:n(t).getStudentData},null,8,["func"])),n(t).fetchedDataLoaded&&l.value.length>0?(d(),f(j,{key:2,class:"table","fixed-header":""},{default:i(()=>[r[9]||(r[9]=o("thead",null,[o("tr",null,[o("th",{class:"table-head"},"TITLE"),o("th",{class:"table-head"},"DATE"),o("th",{class:"table-head"},"START TIME"),o("th",{class:"table-head"},"END TIME"),o("th",{class:"table-head"},"LOCATION"),o("th",{class:"table-head"},"STATUS"),o("th",{class:"table-head"},"ACTION"),o("th",{class:"table-head"},"DESCRIPTION"),o("th",{class:"table-head"},"MAX PARTICIPANTS"),o("th",{class:"table-head"},"DEADLINE")])],-1)),o("tbody",null,[(d(!0),w(M,null,Y(l.value.sort((c,x)=>x.id-c.id),(c,x)=>(d(),w("tr",{key:x},[o("td",de,g(c.title),1),o("td",ce,[v(m,{size:n(s).btnSize1},{default:i(()=>[p(g(n(L)(c.date,"long")),1)]),_:2},1032,["size"])]),o("td",ue,[v(m,{size:n(s).btnSize1},{default:i(()=>[p(g(n(N)(c.start_time)),1)]),_:2},1032,["size"])]),o("td",pe,[v(m,{size:n(s).btnSize1},{default:i(()=>[p(g(n(N)(c.end_time)),1)]),_:2},1032,["size"])]),o("td",ve,[v(m,{size:n(s).btnSize1},{default:i(()=>[p(g(c.location),1)]),_:2},1032,["size"])]),o("td",me,[c.registered?(d(),f(I,{key:0,size:"small",color:"green",icon:"mdi-circle"})):_("",!0),c.registered?_("",!0):(d(),f(I,{key:1,size:"small",color:"yellow",icon:"mdi-circle"})),c.registered?(d(),f(m,{key:2,class:"ml-2",size:"x-small"},{default:i(()=>r[4]||(r[4]=[p("registered")])),_:1})):_("",!0),c.registered?_("",!0):(d(),f(m,{key:3,class:"ml-2",size:"x-small"},{default:i(()=>r[5]||(r[5]=[p("not registered")])),_:1}))]),o("td",_e,[!c.registered&&n(u)<new Date(c.deadline)?(d(),f(m,{key:0,class:"chip-link mb-1",onClick:W=>n(s).ShowDeletionOverlay(()=>b(c.id,x),"Are you sure you want to register for this workshop?."),color:"green",size:"x-small"},{default:i(()=>r[6]||(r[6]=[p("REGISTER")])),_:2},1032,["onClick"])):_("",!0),c.registered&&n(u)<new Date(c.deadline)?(d(),f(m,{key:1,class:"chip-link mt-1",onClick:W=>n(s).ShowDeletionOverlay(()=>D(c.id,x),"Are you sure you want to cancel registration for this workshop?."),color:"red",size:"x-small"},{default:i(()=>r[7]||(r[7]=[p("CANCEL REGISTRATION")])),_:2},1032,["onClick"])):_("",!0)]),o("td",he,[v(m,{class:"chip-link",onClick:W=>O("StudentWorkShopPropertiesViewOverlay",c.description),color:"blue",size:n(s).btnSize1},{default:i(()=>r[8]||(r[8]=[p("See Details")])),_:2},1032,["onClick","size"])]),o("td",ye,[v(m,{size:n(s).btnSize1},{default:i(()=>[p(g(c.max_participants),1)]),_:2},1032,["size"])]),o("td",fe,[v(m,{size:n(s).btnSize1},{default:i(()=>[p(g(n(L)(c.deadline,"long")),1)]),_:2},1032,["size"])])]))),128))])]),_:1})):_("",!0)],2)),[[B,n(s).activePage==="StudentWorkShops"]])}}}),ge=U(Se,[["__scopeId","data-v-e2e27f90"]]),we={key:0,id:"StudentWelcomeOverlay",class:"overlay"},ke={key:0,class:"overlay-card"},De={class:"overlay-card-content-container",style:{"margin-top":"3em"}},be={key:2,class:"main"},Oe={class:"pages-container"},xe=z({__name:"StudentView",setup(C){q({meta:[{name:"robots",content:"no-index"}]});const t=H(),s=T();J(()=>t.userData,()=>{const u=localStorage.getItem("activePage");if(u)s.activePage=u;else{const l=V("");l.value="StudentWorkShops",s.activePage=l.value,localStorage.setItem("activePage",l.value)}},{once:!0,immediate:!0});const S=u=>{const l=document.getElementById(u);l&&(l.style.display="none")};return(u,l)=>{const k=h("v-btn"),D=h("v-card-title"),b=h("v-card-text"),O=h("v-card");return d(),w(M,null,[n(t).userData?(d(),w("div",we,[n(t).userData.last_login?(d(),w("div",ke,[v(k,{onClick:l[0]||(l[0]=E=>S("StudentWelcomeOverlay")),color:"red",size:"small",class:"close-btn",variant:"flat"},{default:i(()=>l[1]||(l[1]=[p(" X ")])),_:1}),o("div",De,[v(O,{class:"welcome-card"},{default:i(()=>[v(D,{class:"text-h5 font-weight-bold"},{default:i(()=>l[2]||(l[2]=[p("Welcome!")])),_:1}),v(b,{class:"welcome-text"},{default:i(()=>[p(" Hello "+g(n(t).userData.first_name)+" "+g(n(t).userData.last_name)+", ðŸŽ‰ Thank you for registering for our workshop! We're thrilled to have you join us. Your account has been created, and you are now logged in. You can log in anytime to explore new workshops and register for more. Stay tuned for updatesâ€”we look forward to seeing you soon! ",1)]),_:1})]),_:1})])])):_("",!0)])):_("",!0),n(t).userData?(d(),f(Z,{key:1})):_("",!0),n(t).userData?(d(),w("main",be,[n(s).onDesk?_("",!0):(d(),f(ae,{key:0})),n(s).onDesk?(d(),f(ne,{key:1})):_("",!0),o("div",Oe,[o("div",{class:F(["component-wrapper",{"is-active-component":n(s).activePage==="StudentWorkShops"}])},[v(ge)],2)])])):_("",!0),n(t).userData?(d(),f(ee,{key:3})):_("",!0)],64)}}}),Te=U(xe,[["__scopeId","data-v-3960a638"]]);export{Te as default};
